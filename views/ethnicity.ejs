<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIMIC Data Visulization</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.3.0/dist/echarts.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div>
        <%- include('./partials/navbar.ejs') %> 

        <div id="main" style="width:800px; height:400px;"></div>
    </div>

    <script type="text/javascript">

        const rawData = '<%- JSON.stringify(data)%>'; 
        const {white, asian, black, unknown, other, hispanic, puertorican, unable,indian} = JSON.parse(rawData);
        console.log(white);

        var myChart = echarts.init(document.getElementById('main'));

        option = {
            tooltip: {
                trigger: 'item'
            },
            legend: {
                top: '0',
                left: 'center'
            },
            series: [
                {
                name: 'Access From',
                type: 'pie',
                radius: ['40%', '70%'],
                avoidLabelOverlap: false,
                itemStyle: {
                    borderRadius: 10,
                    borderColor: '#fff',
                    borderWidth: 2
                },
                label: {
                    show: false,
                    position: 'center'
                },
                emphasis: {
                    label: {
                    show: true,
                    fontSize: '20',
                    fontWeight: 'bold'
                    }
                },
                labelLine: {
                    show: false
                },
                data: [
                    { value:white, name: 'WHITE' },
                    { value:asian, name: 'ASIAN' },
                    { value:black, name: 'BLACK/AFRICAN AMERICAN' },
                    { value:unknown, name: 'UNKNOWN/NOT SPECIFIED' },
                    { value:other, name: 'OTHER' },
                    { value:hispanic, name: 'HISPANIC OR LATINO' },
                    { value:puertorican, name: 'HISPANIC/LATINO - PUERTO RICAN' },
                    { value:indian, name: 'AMERICAN INDIAN/ALASKA NATIVE FEDERALLY RECOGNIZED TRIBE' },
                    { value:unable, name: 'UNABLE TO OBTAIN' },
                ]
                }
            ]
            }; 

            myChart.setOption(option);
    </script>
</body>

</html>